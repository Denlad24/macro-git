modules:
  macro:
    - key: rich-text-macro
      resource: ui-kit-macro
      title: Rich text macro (no config)
      description: Basic rich text macro
      render: native
      layout: bodied
      adfExport:
        function: export-macro
    - key: rich-text-ui-kit-config-macro
      resource: ui-kit-macro
      title: Rich text macro (with config) UI Kit
      description: Basic rich text macro with a custom config editor built using UI Kit
      render: native
      layout: bodied
      config:
        resource: ui-kit-config
        viewportSize: max
        render: native
        title: UI Kit Config Editor
      adfExport:
        function: export-macro
    - key: rich-text-custom-ui-config-macro
      resource: custom-ui-macro
      title: Rich text macro (with config) Custom UI
      description: Basic rich text macro with a custom config using custom ui-kit-config
      layout: bodied
      config:
        resource: custom-ui-config
        viewportSize: max
      adfExport:
        function: export-macro
  function:
    - key: export-macro
      handler: export-macro.adfExport
resources:
  - key: ui-kit-macro
    path: src/ui-kit/index.jsx
  - key: ui-kit-html-frame
    path: src/resources/html-frame/dist
  - key: ui-kit-config
    path: src/ui-kit/custom-config.jsx
  - key: custom-ui-config
    path: src/resources/custom-ui-config/dist
  - key: custom-ui-macro
    path: src/custom-ui/dist
permissions:
  scopes:
    - read:confluence-content.all
    - read:space:confluence
    - read:page:confluence
    - read:confluence-content.summary
    - read:confluence-space.summary
    - read:confluence-props
    - search:confluence
  content:
    styles:
      - "unsafe-inline" # Required for styled_view inline styles in the converted HTML
    scripts:
      - "unsafe-inline" # Rendering embedded content when converted to HTML with expand
  external:
    fetch:
      client:
        - "*.atlassian.net" # Embedded content can call back to Atlassian sites
    images:
      - "*" # Required for images in the converted HTML
    styles:
      # Rendering embedded content when converted to HTML with expand
      - "*.atl-paas.net"
      - "*.cloudfront.net"
    scripts:
      # Rendering embedded content when converted to HTML with expand
      - "*.atl-paas.net"
      - "*.cloudfront.net"
app:
  runtime:
    name: nodejs20.x
  id: ari:cloud:ecosystem::app/49636fc3-425f-4643-884d-0f0919768ebb
